<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FroomNI — Team Room Status</title>
  <meta name="theme-color" content="#0b0d12" />
  <link rel="stylesheet" href="styles.css" />
  <link rel="icon" href="icon-192.png" />
  <link rel="apple-touch-icon" href="apple-touch-icon-180.png" />
</head>
<body>

  <header class="appHeader">
  <div class="logoArea" onclick="showTab('tab-overview')">
    <img src="logo.svg" alt="Froom logo" class="logo" />
    <span class="logoText">Froom</span>
  </div>

  <div style="display:flex; align-items:center; gap:8px;">
    <div class="userChip" id="userChip">
      <div class="avatar" id="userAvatar">U</div>
      <div class="userInfo">
        <div id="chipName"></div>
        <div id="chipRole" class="muted small"></div>
      </div>
    </div>

    <!-- NEW: Logout -->
    <button id="logoutBtn" type="button" class="ghost">Logout</button>
  </div>
</header>

  <!-- Page container -->
  <div class="page">

    <!-- AUTH WRAPPER (kept for app.js) -->
    <section id="auth" class="panel">

      <!-- PRACTICE SCREEN (Landing) -->
      <div id="practiceScreen">
        <h2>Join Your Practice</h2>

        <div class="field">
          <label>Practice Code</label>
          <input id="prCode" placeholder="Z00701" />
        </div>

        <div class="field">
          <label>Full Name</label>
          <input id="fullName" placeholder="Jane Smith" />
        </div>

        <div class="field">
          <label>Role</label>
          <select id="role">
            <option>GP</option>
            <option>Nurse</option>
            <option>Reception</option>
            <option>Manager</option>
            <option>Other</option>
          </select>
        </div>

        <div class="field">
          <label>Location (optional)</label>
          <input id="location" placeholder="Room 1 • Front Desk" />
        </div>

        <button id="enterBtn" type="button" class="primary">Enter</button>

        <hr />
        <div class="small muted">
          Are you an administrator?  
          <a href="#" id="toAdmin">Go to admin / staff sign in</a>
        </div>
      </div>

      <!-- ADMIN / STAFF SCREEN (Separate) -->
      <div id="adminScreen" class="hidden">
        <h2>Admin / Staff Sign In</h2>

        <div class="field">
          <label>Email</label>
          <input id="email" type="email" placeholder="you@practice.com" />
        </div>
        <div class="field">
          <label>Password</label>
          <input id="pass" type="password" placeholder="••••••••" />
        </div>

        <button id="signinBtn" type="button">Sign In</button>
        <button id="signupToggle" type="button" class="ghost">Sign Up</button>

        <div id="signupArea" class="hidden">
          <div class="field">
            <label>Invite Code</label>
            <input id="inviteCode" placeholder="Paste invite code" />
          </div>
          <div class="field">
            <label>Full Name</label>
            <input id="signupName" placeholder="Your full name" />
          </div>
          <button id="signupBtn" type="button" class="primary">Create Account</button>
        </div>

        <hr />
        <div class="small muted">
          Back to practice login?  
          <a href="#" id="toPractice">Go to practice join</a>
        </div>
      </div>

    </section>

    <!-- APP TABS (shown after joining a practice) -->
    <section id="tabs" class="hidden">
      <div class="tabs">
        <button data-tab="overview" class="active">Overview</button>
        <button data-tab="me">My Status</button>
        <button data-tab="activity">Activity</button>
        <button id="adminTab" data-tab="admin" class="hidden">Admin</button>
      </div>

      <!-- Overview -->
      <section id="tab-overview">
        <h2>Practice: <span id="chipPractice"></span></h2>
        <div id="team" class="list"></div>
        <div id="teamEmpty" class="muted hidden">No staff yet.</div>
      </section>

      <!-- My Status -->
      <section id="tab-me" class="hidden">
        <h2>My Status — <span id="chipMe"></span></h2>

        <div class="field">
          <label>Availability</label>
          <select id="avail">
            <option value="free">Free</option>
            <option value="busy">Busy</option>
            <option value="dnd">Do Not Disturb</option>
          </select>
        </div>

        <div class="field">
          <label>Activity</label>
          <input id="activity" placeholder="In clinic • On calls • Break" />
        </div>

        <div class="field">
          <label>Location</label>
          <input id="meLocation" placeholder="Room 2 • Front Desk" />
        </div>

        <div class="field">
          <label>Note</label>
          <input id="note" placeholder="e.g., With patient until 15:30" />
        </div>

        <button id="saveBtn" type="button" class="primary">Save</button>
      </section>

      <!-- Activity -->
      <section id="tab-activity" class="hidden">
        <h2>Recent Changes</h2>
        <div id="activityList" class="list"></div>
        <div id="activityEmpty" class="muted hidden">No activity yet.</div>
      </section>

      <!-- Admin -->
      <section id="tab-admin" class="hidden">
        <h2>Admin Panel</h2>

        <div class="panel">
          <h3>1. Claim Admin</h3>
          <div class="small muted">Sign in with your admin email, then click once.</div>
          <button id="claimAdminBtn" type="button" class="primary">Claim Admin Role</button>
        </div>

        <div class="panel">
          <h3>2. Create Practice</h3>
          <div class="field">
            <label>Practice Code</label>
            <input id="newPracticeCode" placeholder="Z00xxx" />
          </div>
          <div class="field">
            <label>Practice Name</label>
            <input id="newPracticeName" placeholder="Practice name" />
          </div>
          <button id="createPracticeBtn" type="button">Create Practice</button>
        </div>

        <div class="panel">
          <h3>3. Invite Staff</h3>
          <div class="field">
            <label>Practice Code</label>
            <input id="invPractice" placeholder="Z00xxx" />
          </div>
          <div class="field">
            <label>Role</label>
            <select id="invRole">
              <option>GP</option>
              <option>Nurse</option>
              <option>Reception</option>
              <option>Manager</option>
              <option>Other</option>
            </select>
          </div>
          <button id="makeInviteBtn" type="button">Generate Invite</button>
          <div id="lastInvite" class="small muted" style="margin-top:8px;"></div>
        </div>

        <div class="panel">
          <h3>4. Manage Staff</h3>
          <div class="field">
            <label>Practice Code</label>
            <input id="managePractice" placeholder="Z00xxx" />
          </div>
          <button id="loadStaffBtn" type="button">Load Staff</button>
          <div id="staffList" class="list"></div>
        </div>
      </section>
    </section>
  </div><!-- /.page -->

  <!-- Simple screen toggles (doesn't interfere with app.js) -->
  <script>
    const showAdmin = ()=>{ document.getElementById('practiceScreen').classList.add('hidden'); document.getElementById('adminScreen').classList.remove('hidden'); };
    const showPractice = ()=>{ document.getElementById('adminScreen').classList.add('hidden'); document.getElementById('practiceScreen').classList.remove('hidden'); };
    document.addEventListener('DOMContentLoaded', ()=>{
      const a=document.getElementById('toAdmin'); if(a) a.addEventListener('click', e=>{e.preventDefault();showAdmin();});
      const b=document.getElementById('toPractice'); if(b) b.addEventListener('click', e=>{e.preventDefault();showPractice();});
    });
  </script>

  <!-- Firebase + App -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
  <script src="app.js"></script>
</body>
</html>
